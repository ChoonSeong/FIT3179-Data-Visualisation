{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": "Analysis of India Criminal Cases In 2018",
    "width": "container",
    "data": {
      "url": "https://raw.githubusercontent.com/ChoonSeong/FIT3179-Data-Visualisation/Week9-Homework/data/2018%20Cases%20against%20Police%20Personnels.csv"
    },
    "params": [
      {
        "name": "State_Selection",
        "bind": {
          "input": "select",
          "options": [
            null,
            "Andhra Pradesh",
            "Arunachal Pradesh",
            "Assam",
            "Bihar",
            "Chhattisgarh",
            "Goa",
            "Gujarat",
            "Haryana",
            "Himachal Pradesh",
            "Jammu and Kashmir",
            "Jharkhand",
            "Karnataka",
            "Kerala",
            "Madhya Pradesh",
            "Maharashtra",
            "Manipur",
            "Meghalaya",
            "Mizoram",
            "Nagaland",
            "Orissa",
            "Punjab",
            "Rajasthan",
            "Sikkim",
            "Tamil Nadu",
            "Telangana",
            "Tripura",
            "Uttar Pradesh",
            "Uttaranchal",
            "West Bengal",
            "Andaman and Nicobar",
            "Chandigarh",
            "Dadra and Nagar Haveli",
            "Daman and Diu",
            "Delhi",
            "Lakshadweep",
            "Puducherry"
          ],
          "labels":[
            "Show All",
            "Andhra Pradesh",
            "Arunachal Pradesh",
            "Assam",
            "Bihar",
            "Chhattisgarh",
            "Goa",
            "Gujarat",
            "Haryana",
            "Himachal Pradesh",
            "Jammu and Kashmir",
            "Jharkhand",
            "Karnataka",
            "Kerala",
            "Madhya Pradesh",
            "Maharashtra",
            "Manipur",
            "Meghalaya",
            "Mizoram",
            "Nagaland",
            "Orissa",
            "Punjab",
            "Rajasthan",
            "Sikkim",
            "Tamil Nadu",
            "Telangana",
            "Tripura",
            "Uttar Pradesh",
            "Uttaranchal",
            "West Bengal",
            "Andaman and Nicobar",
            "Chandigarh",
            "Dadra and Nagar Haveli",
            "Daman and Diu",
            "Delhi",
            "Lakshadweep",
            "Puducherry"
          ],
          "name": "State/UT Selection: "
        }
      },
      {
        "name": "Population_Above",
        "value": 0,
        "bind": {
          "input": "range",
          "min": 0,
          "max": 100000000,
          "step": 1000000,
          "name": "Minimum Population: "
        }
      }
    ],
    "transform": [
      {
        "fold": [
          "Number of Cases - Registered",
          "Number of Cases - Quashed/Stayed by Courts",
          "Number of Cases - Chargesheeted",
          "Number of Cases - Final Report Submitted"
        ],
        "as": [
          "key",
          "value"
        ]
      },
      {"filter": "datum.value > 0"},
      {"filter": "State_Selection == null || datum['State/UT'] == State_Selection"},
      {
        "calculate": "datum.value / datum.Population * 1000000",
        "as": "Cases per 1,000,000 Population"
      },
      {"filter": "datum.Population > Population_Above"},
      {
        "joinaggregate": [
          {"op": "sum", "field": "Cases per 1,000,000 Population", "as": "total_cases"}
        ],
        "groupby": ["State/UT"]
      }
    ],
    "layer":[
      {
        "mark": "bar",
        "encoding": {
          "x": {"field": "State/UT", "type": "nominal"},
          "y": {
            "field": "Cases per 1,000,000 Population",
            "type": "quantitative",
            "title": "Cases per 1,000,000 Population"
          },
          "color": {
            "type": "nominal",
            "field": "key",
            "title": "Cases Progression",
            "scale": {
              "domain": [
                "Number of Cases - Registered",
                "Number of Cases - Quashed/Stayed by Courts",
                "Number of Cases - Chargesheeted",
                "Number of Cases - Final Report Submitted"
              ],
              "range": [
                "#a6cee3",
                "#1f78b4",
                "#b2df8a",
                "#33a02c"
              ]
            }
          },
          "tooltip": [
            {"field": "State/UT", "type": "nominal", "title": "State/UT"},
            {"field": "key", "type": "nominal", "title": "Category"},
            {"field": "value", "type": "quantitative", "title": "Number of Cases", "format": ","},
            {"field": "Cases per 1,000,000 Population", "type": "quantitative", "title": "Cases per 1,000,000 Population", "format": ".2f"}
          ]
        }
      },
      {
        "mark": {
          "type": "text",
          "align": "center",
          "baseline": "bottom",
          "color": "black",
          "fontWeight": "bold"
        },
        "encoding": {
          "x": {"field": "State/UT", "type": "nominal"},
          "y": {"field": "total_cases", "type": "quantitative"},
          "text": {"field": "total_cases", "type": "quantitative", "format": ".2f"},
          "tooltip": [
            {"field": "State/UT", "type": "nominal", "title": "State/UT"},
            {"field": "total_cases", "type": "quantitative", "title": "Total Cases per 1,000,000 Population", "format": ".2f"}
          ]
        }
      }
    ]
  }